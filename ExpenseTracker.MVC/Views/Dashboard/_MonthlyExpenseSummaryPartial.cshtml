@using ExpenseTracker.Domain.DTOs
@model ExpenseReportSummaryViewModel

@{
	decimal totalSpendAmount = 0;
	decimal monthlyBudget = 25000;
}
<div class="form-group mb-2 d-flex gap-2">
	<select class="form-select form-select-sm" style="width:120px;" id="drpMonth" onchange="GetExpenseSummaryList()">
		@for (int i = 1; i <= 12; i++)
		{
			@if (Model.CurrentMonth == i)
			{
				<option value="@i" selected>@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(i)</option>
			}
			else
			{
				<option value="@i">@System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(i)</option>
			}
		}
	</select>
	<select class="form-select form-select-sm" style="width:100px;" id="drpYear" onchange="GetExpenseSummaryList()">
		@for (int i = 2015; i <= 2025; i++)
		{
			@if (Model.CurrentYear == i)
			{
				<option value="@i" selected>@(i)</option>
			}
			else
			{
				<option value="@i">@(i)</option>
			}
		}
	</select>
</div>
<div>
	<table class="table table-white">
		<thead>
			<tr>
				<th>Category</th>
				<th>Spend Amount</th>
			</tr>
		</thead>
		<tbody>
			@if (Model != null && Model.ExpenseMonthlySummary.Any())
			{

				@foreach (var item in Model.ExpenseMonthlySummary)
				{
					totalSpendAmount += item.SpendAmount;
					<tr>
						<td>@item.Category</td>
						<td>@item.SpendAmount.ToString("C")</td>
					</tr>
				}
				<tr>
					<td><strong>Total</strong></td>
					<td><strong>@totalSpendAmount.ToString("C")</strong></td>
				</tr>
			}
			else
			{
				<tr>
					<td colspan="2">No data available.</td>
				</tr>
			}

		</tbody>
	</table>
</div>
<div class="summarycontainer">
	<div class="iconcontainer">
		<div class="item budgeted">
			<div class="icon">💰</div>
			<div class="amount">@monthlyBudget.ToString("C")</div>
			<div class="label">Budgeted Amount</div>
		</div>
		<div class="item spent">
			<div class="icon">📧</div>
			<div class="amount">@totalSpendAmount.ToString("C")</div>
			<div class="label">Amount Spent</div>
		</div>
		<div class="item exceeded">

			<div class="icon">📈</div>
			<div class="amount">
				@((monthlyBudget - totalSpendAmount).ToString("C"))
			</div>
			<div class="label">@(monthlyBudget - totalSpendAmount > 0 ? "Saved By" : "Exceeded by")</div>
		</div>
	</div>

</div>